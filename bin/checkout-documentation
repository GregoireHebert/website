#!/usr/bin/env node

const {docPagesDirectory, versions} = require('../constants');
const { execSync } = require('child_process');

execSync(`rm -rf ${docPagesDirectory}`);

versions.map(version => {
    if ('stable' === version) {
        console.info(`checking out the stable version in ${docPagesDirectory}stable`);
        execSync(`git clone https://github.com/api-platform/docs.git ${docPagesDirectory}stable`);
        console.log(`stable version checked out.`);
    } else {
        let versionDirectory = isNaN(version) ? version : `v${version}`;
        console.info(`checking out the ${version} version in ${docPagesDirectory}${versionDirectory}/ directory`);
        execSync(`cp -R ${docPagesDirectory}stable ${docPagesDirectory}${versionDirectory}/`);
        execSync(`cd ${docPagesDirectory}${versionDirectory} && git checkout ${version}`);
        console.log(`${version} version checked out.`);
    }
});
