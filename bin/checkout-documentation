#!/usr/bin/env node

const {docPagesDirectory, versions} = require('../constants');
const { execSync } = require('child_process');

execSync(`rm -rf ${docPagesDirectory}`);

versions.map(version => {
    if ('stable' === version) {
        console.info(`checking out the stable version in ${docPagesDirectory}stable`);
        execSync(`git clone https://github.com/api-platform/docs.git ${docPagesDirectory}stable`);
        console.log(`stable version checked out.`);
    } else {
        console.info(`checking out the ${version} version in ${docPagesDirectory}${version}/ directory`);
        execSync(`cp -R ${docPagesDirectory}stable ${docPagesDirectory}${version}/`);
        execSync(`cd ${docPagesDirectory}${version} && git checkout ${version}`);
        console.log(`${version} version checked out.`);
    }
});
